//------------------------------------------------------------------------------
//<auto-generated>
//    This code was generated from a template.
//    Manual changes to this file will be overwritten if the code is regenerated.
//</auto-generated>
//------------------------------------------------------------------------------

//function ApprovePenawaranDialog(el) {
//    var data = $(el).data('detail');
//    $('.clear').val('');
//    $('#md-approve-penawaran').modal('show');

//    $('#Approve-Penawaran-NamaProgram').val(data.Program.NamaProgram);
//    $('#Approve-Penawaran-JenisProgram').val(data.Program.JenisProgram.Nama);
//    $('#Approve-Penawaran-tgl').val(DateToStringFormat(data.Program.TglPelaksanaan));
//    $('#Approve-Penawaran-Tempat').val(data.Program.Kecamatan +","+ data.Program.Kelurahan );
//    $('#Approve-Penawaran-Deskripsi').val(data.Program.Deskripsi);
//    $('#Approve-Penawaran-IdPenawaran').val(data.Id);
//    $('#Approve-Penawaran-DeskripsiPenawaran').val(data.Deskripsi);
//    data.Program.Items.forEach(function (list) {
//        $('#tbody-Kebutuhan').append(`
//            <tr>
//				<td class="text-center">${list.Nama}</td>
//				<td class="text-center">${list.Jumlah}</td>								
//                <td class="text-center">${list.SatuanJenis.Nama}</td>
//           </tr>
//        `)
//    })
//    //console.log("data", data.Program.PhotoUrl);
//    //$('#Approve-Penawaran-LampiranPhoto').val(data.Program.PhotoUrl);
//    //$('#Approve-Penawaran-LampiranPhoto').click(function () {
//    //    window.location.href = data.Program.PhotoUrl;
//    //});
///*    Lampiran Program*/
//    data.Program.Lampiran.forEach(function (IdLampiran) {
//        if (IdLampiran.Id != null) {
//            GetFileProgram(IdLampiran.Id);
//            $('#previewDokumenProgram').removeClass('display-none');
//        }
//        else {
//            $('#previewDokumenProgram').addClass('display-none');
//        }
//    })
///*    Lampiran Penawaran*/
//    data.Lampiran.forEach(function (IdLampiranPenawaran) {
//        console.log('Id lampiran', IdLampiranPenawaran.Id);
//        if (IdLampiranPenawaran.Id != null) {
//            GetFilePenawaran(IdLampiranPenawaran.Id);
//            $('#previewDokumenPenawaran').removeClass('display-none');
//        }
//        else {
//            $('#previewDokumenPenawaran').addClass('display-none');
//        }
//    })
    
//    $('#md-approve-penawaran').data('Id', data.Id);
//    $('#btn-approve-Penawaran').unbind();
//    $('#btn-approve-Penawaran').on('click', function () {
//        approvePengajuanSave();
//    });

//    $('#md-approve-penawaran').data('Id', data.Id);
//    $('#btn-reject-Penawaran').unbind();
//    $('#btn-reject-Penawaran').on('click', function () {
//        rejectPengajuanSave();
//    });
    
//}
//function GetFileProgram(Id) {
//    RequestData('GET', `/v1/Media/download/${Id}`, '', null, null, function (data_obj) {
//        if (data_obj.Succeeded) {
//            console.log("DATA ID LAMPIRAN", Id);
//            $('#Approve-Penawaran-LampiranProgram').text(data_obj.Data.Filename, 'data:application/pdf;base64,' + data_obj.Data.Base64);
//            }
//            else if (data_obj.code == 401) { //unathorized
//                AlertMessage(data_obj.message);
//            } else
//                ShowNotif(`${data_obj.message} : ${data_obj.description}`, "error");
//        });
//}

//function GetFilePenawaran(Id) {
//    console.log("DATA iD", Id);
//    RequestData('GET', `/v1/Media/download/${Id}`, '', null, null, function (data_obj) {
//            if (data_obj.Succeeded) {
//                $('#Approve-Penawaran-LampiranPenawaran').text(data_obj.Data.Filename, 'data:application/pdf;base64,' + data_obj.Data.Base64);
//            }
//            else if (data_obj.code == 401) { //unathorized
//                AlertMessage(data_obj.message);
//            } else
//                ShowNotif(`${data_obj.message} : ${data_obj.description}`, "error");
//        });
//}
function approvePengajuanSave() {
    var getUrl = (window.location).href;
    var id = getUrl.substring(getUrl.lastIndexOf('=') + 1);
    ConfirmMessage('Apakah Anda Yakin?', function (isConfirm) {
        if (isConfirm) {
            var param = {
                IdPenawaran: id,
                IsApprove: true,
                Comment: $('#Approve-Penawaran-Comment').val()
            }
            console.log(param);
            RequestData('POST', `/v1/Penawaran/approval`, '#DetailPengajuan', null, JSON.stringify(param), function (data_obj) {
                if (data_obj.Succeeded) {
                    ShowNotif("Data Berhasil Disimpan", "success");
                    detailPengajuanInternal();
                }
                else if (data_obj.code == 401) { //unathorized
                    AlertMessage(data_obj.message);
                } else
                    ShowNotif(`${data_obj.message} : ${data_obj.description}`, "error");
            });
        }
    });
}

function rejectPengajuanSave() {
    var getUrl = (window.location).href;
    var id = getUrl.substring(getUrl.lastIndexOf('=') + 1);
    ConfirmMessage('Apakah Anda Yakin?', function (isConfirm) {
        if (isConfirm) {
            var param = {
                IdPenawaran: id,
                IsApprove: false,
                Comment: $('#Approve-Penawaran-Comment').val()
            }
            console.log(param);
            RequestData('POST', `/v1/Penawaran/approval`, "#DetailPengajuan", null, JSON.stringify(param), function (data_obj) {
                if (data_obj.Succeeded) {
                    ShowNotif("Data Berhasil Disimpan", "success");
                    detailPengajuanInternal();
                }
                else if (data_obj.code == 401) { //unathorized
                    AlertMessage(data_obj.message);
                } else
                    ShowNotif(`${data_obj.message} : ${data_obj.description}`, "error");
            });
        }
    });
}
function detailPengajuanInternal() {
    openMenu(`/Penawaran/Internal`);
}